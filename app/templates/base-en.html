{% extends 'layout/_template.njk' %}

{% if page_title %}
    {% set page_title_value = page_title + ' - Census 2021' %}
{% else %}
    {% set page_title_value = 'Census 2021' %}
{% endif %}

{% if page_show_signout == 'true' %}
    {% set signout_button_value = {
            'text': 'Save and sign out',
            'ariaLabel': 'Toggle main navigation',
            'url': domain_url_en + '/en/start/save-and-exit/'
        }
    %}
{% endif %}

{% set footer_content = {
        'poweredBy': true,
        'lang': 'en',
        'rows': [
            {
                'itemsList': [
                    {
                        'text': 'About the census',
                        'url': domain_url_en + '/about-the-census/',
                        'target': '_blank'
                    },
                    {
                        'text': 'Help with your census',
                        'url': domain_url_en + '/help/',
                        'target': '_blank'
                    },
                    {
                        'text': 'Contact us',
                        'url': domain_url_en + '/contact-us/',
                        'target': '_blank'
                    }
                ]
            },
            {
                'itemsList': [
                    {
                        'text': 'Cookies',
                        'url': domain_url_en + '/cookies/',
                        'target': '_blank'
                    },
                    {
                        'text': 'Accessibility',
                        'url': domain_url_en + '/en/start/accessibility/',
                        'target': '_blank'
                    },
                    {
                        'text': 'Privacy and data protection',
                        'url': domain_url_en + '/privacy-and-data-protection/',
                        'target': '_blank'
                    }
                ]
            }
        ]
    }
%}

{% if page_url %}
    {% set language = { 'languages':
        [
            {
                'url': '/en' + page_url,
                'ISOCode': 'en',
                'text': 'English',
                'buttonAriaLabel': 'Language selector. Current language: English',
                'chooseLanguage': 'Choose language',
                'allLanguages': 'All languages',
                'current': true
            },
            {
                'url': '/cy' + page_url,
                'ISOCode': 'cy',
                'text': 'Cymraeg',
                'buttonAriaLabel': 'Dewisydd iaith. Iaith gyfredol: Cymraeg',
                'chooseLanguage': 'Dewiswch iaith',
                'allLanguages': 'Pob iaith',
                'current': false
            }
        ]
}
    %}
{% endif %}

{% set pageConfig = {
    'title': page_title_value,
    'theme': 'census',
    'header': {
        'titleLogo': 'census-logo-en',
        'titleLogoAlt': 'Census 2021',
    },
    'signoutButton': signout_button_value,
    'language': language,
    'footer': footer_content
} %}

{% block head %}

    <!-- Google Analytics -->
    {% if gtm_auth and gtm_preview and gtm_cookies_win %}
        {% include 'partials/gtm.html' with context %}
    {% endif %}
    <!-- End Google Analytics -->

{% endblock %}

{% block bodyStart %}

    {% if gtm_auth and gtm_preview and gtm_cookies_win %}
        {% include 'partials/gtm-no-script.html' with context %}
    {% endif %}

{% endblock %}

{% block preHeader %}

    {% from 'components/cookies-banner/_macro.njk' import onsCookiesBanner %}
    {{
        onsCookiesBanner({
            "statementTitle": 'Tell us whether you accept cookies',
            "statementText": 'We use <a href="' + domain_url_en + '/cookies' + '">cookies to collect information</a> about how you use census.gov.uk. We use this information to make the website work as well as possible and improve our services.',
            "confirmationText": 'Youâ€™ve accepted all cookies. You can <a href="' + domain_url_en + '/cookies' + '">change your cookie preferences</a> at any time.',
            "secondaryButtonUrl": domain_url_en + '/cookies'
        })
    }}
{% endblock %}
